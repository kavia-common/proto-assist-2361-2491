{"is_source_file": true, "format": "bash", "description": "This is a startup shell script that manages the initialization and startup of a PostgreSQL database container environment, including fallback mechanisms if PostgreSQL is not available, such as running a health server or keep-alive process. It sets up environment variables, checks for dependencies, initializes data directories, and handles process management for the database or placeholder services.", "external_files": ["scripts/health.js", "db_visualizer/server.js", "sql/*.sql", ".health_server.pid", "db_connection.txt", "db_visualizer/postgres.env"], "external_methods": ["command", "mkdir", "tail", "printf", "cat", "ls", "kill"], "published": [], "classes": [], "methods": [{"name": "keep_alive", "description": "Keeps the container alive by either binding a port with netcat or tailing /dev/null if netcat is unavailable, acting as a placeholder so that the container remains in a running state without a real database."}, {"name": "start_health", "description": "Attempts to start a lightweight health server using node.js scripts if available; otherwise falls back to keep_alive mechanism, providing a placeholder health endpoint."}, {"name": "start_postgres", "description": "Initializes and starts a PostgreSQL database server, sets up roles and permissions, applies SQL migrations if present, and sets environment variables for client connections."}], "calls": ["command", "mkdir", "tail", "printf", "cat", "ls", "kill", "pn_isready", "postgres", "psql", "initdb", "createdb"], "search-terms": ["startup.sh", "PostgreSQL container startup", "fallback health server", "bash script initialization", "database environment setup"], "state": 2, "file_id": 1, "knowledge_revision": 35, "git_revision": "09b81b4b934d558ee858de4d5064f4c682a265ff", "revision_history": [{"10": "41d8c79122cc878e24191a1ec7ea7787c59e459f"}, {"21": "41d8c79122cc878e24191a1ec7ea7787c59e459f"}, {"22": "0ae32f76635f8ab36f165afaad26c3fdabf6f6d6"}, {"35": "09b81b4b934d558ee858de4d5064f4c682a265ff"}], "hash": "52add63c5c387e4e1690709fad093a6c", "format-version": 4, "code-base-name": "Database", "filename": "Database/startup.sh"}