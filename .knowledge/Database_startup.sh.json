{"is_source_file": true, "format": "bash", "description": "A shell script for managing PostgreSQL container startup, including health check server fallback, binary detection, and database initialization and configuration.", "external_files": ["scripts/health.js", "db_visualizer/server.js", ".health_server.pid", "db_connection.txt", "postgres.env"], "external_methods": ["command -v", "ls", "pgrep", "sudo"], "published": [], "classes": [], "methods": [{"name": "start_health", "description": "Starts a lightweight health server as a fallback if the main health scripts are missing or Node.js is unavailable."}], "calls": ["command -v node", "command -v nc", "ls", "pgrep -f \"postgres.*-p ${DB_PORT}\"", "sudo -u postgres \"${PG_ISREADY}\"", "sudo -u postgres \"${PSQL_BIN}\"", "sudo -u postgres \"${CREATEDB_BIN}\"", "sudo -u postgres \"${INITDB_BIN}\"", "ls /usr/lib/postgresql/", "cat \"${BASE_DIR}/.health_server.pid\"", "sleep 2", "psql -h localhost -U ${DB_USER} -d ${DB_NAME} -p ${DB_PORT}", "psql -p \"${DB_PORT}\" -d \"${DB_NAME}\" -c '\\q'", "sudo -u postgres \"${PSQL_BIN}\" -p \"${DB_PORT}\" -d \"${DB_NAME}\" << EOF", "cat > \"${VIEWER_DIR}/postgres.env\"", "echo \"psql postgresql://${DB_USER}:${DB_PASSWORD}@localhost:${DB_PORT}/${DB_NAME}\""], "search-terms": ["Database container startup", "health server", "PostgreSQL binaries detection", "database initialization", "container health fallback", "startup script", "pg_isready check"], "state": 2, "file_id": 1, "knowledge_revision": 21, "git_revision": "41d8c79122cc878e24191a1ec7ea7787c59e459f", "revision_history": [{"10": "41d8c79122cc878e24191a1ec7ea7787c59e459f"}, {"21": "41d8c79122cc878e24191a1ec7ea7787c59e459f"}], "hash": "551c0590d929e03fdcb3c56a1e3d285f", "format-version": 4, "code-base-name": "Database", "filename": "Database/startup.sh"}